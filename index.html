<!DOCTYPE html>
<html>
<head>
	<title>binarySearch Visualization</title>
	<style type="text/css">
		#canvas{
			margin-left: 5%;
		}
	</style>
</head>
<body>
	<canvas id='canvas'>This is a worst browser</canvas>
	<script type="text/javascript">
		let can = document.getElementById('canvas');
		let ctx = can.getContext('2d');
		// let ctx1 = can.getContext('2d');

		can.width = "1200";
		can.height = "500";
		can.style.backgroundColor = 'lightgreen';

		let rand = (mx , mn)=>{
			return Math.floor(Math.random()*(mx - mn) + mn);
		}

		let draw = (x , y , a , b , z , color)=>{
			// ctx.clearRect(x , y , a , b);
			ctx.beginPath();
			ctx.fillStyle = color;
			ctx.fillRect(x , y , a ,b);
			ctx.font = "15px Arial";
			ctx.fillText(z , x , y - 10);
            ctx.fill();
            ctx.closePath();

		}
		let drawElement = (n) =>{
			let heights = [];
			for(let i = 0 ;  i < n; ++i){
				heights.push(i+100);
			}
			heights.sort();
			for(let i = 0 ; i  < n; ++i){
				draw(i * 10 , 500 - heights[i], 12, heights[i] , heights[i] , "red");

			}
			var l = 0 , r = 30 , target = 111;
		    setInterval(async function(){
		    	
				console.log(l , r);

				setTimeout(function(){
				  console.log(l , r);
				  draw(l * 30 , 500 - heights[l] ,20, heights[l] , heights[l] , 'black');
				  draw(r * 30 , 500 - heights[r] ,20, heights[r] , heights[r] , 'black');
				},1000);
				ctx.clearRect(0 , 0 , 1200, 500);
				for(let i = 0 ; i  < n; ++i){
				draw(i * 30 , 500 - heights[i] ,20, heights[i] , heights[i] , "red");

			}
				await sleep(1000);

			if(l<=r){
				let m = (l + r) >> 1;
				if(heights[m] === target){
					console.log('found at = ' , m);
					draw(m*30,500-heights[m],20,heights[m],heights[m],"blue")
				}else if(heights[m] > target){
					r = m - 1;
				}else{
					l = m + 1;
				}
			}

		}, 3000);
			
		}
		function sleep(ms) {
                return new Promise(resolve => setInterval(resolve, ms));
            }
		drawElement(100);
	</script>

</body>
</html>